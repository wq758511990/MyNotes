<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">hello</div>
</body>
<script>
    let data = {
        msg: 'hello',
        count: 0
    }
    let vm = new Proxy(data, {
        // 执行代理行为的函数
        // 当访问vm对象的成员会执行
        get(target, key) {
            // target就是data
            console.log('get, key', key, target[key])
            return target[key]
        },
        // 设置vm成员时会执行
        set(target, key, newVal) {
            console.log('set, key', key, newVal)
            if (target[key] === newVal) {
                return
            }
            target[key] = newVal
            document.querySelector('#app').textContent = target[key]
        }
    })
    setTimeout(() => {
        vm.msg = 'hello world'
    }, 2000);
</script>
</html>